"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var Perlin=function a(b,c,d){var e=Math.floor,f=this;_classCallCheck(this,a),_defineProperty(this,"get_value",function(a,b,c){return(a*=.9*f.frequency,b*=.9*f.frequency,c*=.9*f.frequency,1==f.dimension)?f.perlin2D(a,0)*f.magnitude:2==f.dimension?f.perlin2D(a,b)*f.magnitude:3==f.dimension?f.perlin3D(a,b,c)*f.magnitude:void 0}),_defineProperty(this,"mod",function(a,b){return(a%b+b)%b}),_defineProperty(this,"lerp",function(c,a,b){return b*c+(1-b)*a}),_defineProperty(this,"fade",function(a){var b=Math.pow;return 6*b(a,5)-15*b(a,4)+10*b(a,3)}),_defineProperty(this,"smerp",function(c,a,b){return f.lerp(c,a,f.fade(b))}),_defineProperty(this,"dot_product",function(c,a){if(c.constructor!==Array)throw"First argument is not an array.";else if(a.constructor!==Array)throw"Second argument is not an array.";else if(c.length!==a.length)throw"Arrays are not the same length.";for(var b=0,d=0;d<c.length;d++)b+=c[d]*a[d];return b}),_defineProperty(this,"create_random_vector",function(a,b){for(var c=[],d=0;d<a;d++)if(b){var e=1;.5<=Math.random()&&(e=-1),c.push(e)}else c.push(2*Math.random()-1);return c}),_defineProperty(this,"perlin2D",function(a,b){var c=e(a),d=e(b),g=a-c,h=b-d,i=f.dot_product([g,h],f.grid.data[f.mod(d,f.grid.rows)][f.mod(c,f.grid.cols)]),j=f.dot_product([g,h-1],f.grid.data[f.mod(d+1,f.grid.rows)][f.mod(c,f.grid.cols)]),k=f.dot_product([g-1,h],f.grid.data[f.mod(d,f.grid.rows)][f.mod(c+1,f.grid.cols)]),l=f.dot_product([g-1,h-1],f.grid.data[f.mod(d+1,f.grid.rows)][f.mod(c+1,f.grid.cols)]),m=f.smerp(j,i,h),n=f.smerp(l,k,h);return f.smerp(n,m,g)}),_defineProperty(this,"perlin3D",function(a,b,c){var d=e(a),g=e(b),h=e(c),i=a-d,j=b-g,k=c-h,l=f.dot_product([i,j,k],f.grid.data[f.mod(g,f.grid.rows)][f.mod(d,f.grid.cols)][f.mod(h,f.grid.layers)]),m=f.dot_product([i,j,k-1],f.grid.data[f.mod(g,f.grid.rows)][f.mod(d,f.grid.cols)][f.mod(h+1,f.grid.layers)]),n=f.dot_product([i,j-1,k],f.grid.data[f.mod(g+1,f.grid.rows)][f.mod(d,f.grid.cols)][f.mod(h,f.grid.layers)]),o=f.dot_product([i,j-1,k-1],f.grid.data[f.mod(g+1,f.grid.rows)][f.mod(d,f.grid.cols)][f.mod(h+1,f.grid.layers)]),p=f.dot_product([i-1,j,k],f.grid.data[f.mod(g,f.grid.rows)][f.mod(d+1,f.grid.cols)][f.mod(h,f.grid.layers)]),q=f.dot_product([i-1,j,k-1],f.grid.data[f.mod(g,f.grid.rows)][f.mod(d+1,f.grid.cols)][f.mod(h+1,f.grid.layers)]),r=f.dot_product([i-1,j-1,k],f.grid.data[f.mod(g+1,f.grid.rows)][f.mod(d+1,f.grid.cols)][f.mod(h,f.grid.layers)]),s=f.dot_product([i-1,j-1,k-1],f.grid.data[f.mod(g+1,f.grid.rows)][f.mod(d+1,f.grid.cols)][f.mod(h+1,f.grid.layers)]),t=f.smerp(n,l,j),u=f.smerp(r,p,j),v=f.smerp(o,m,j),w=f.smerp(s,q,j),x=f.smerp(u,t,i),y=f.smerp(w,v,i);return f.smerp(y,x,k)}),_defineProperty(this,"create_gradient_grid3D",function(a,b,c){for(var d,e={rows:a,cols:b,layers:c,data:[]},g=0;g<a;g++){d=[];for(var h,k=0;k<b;k++){h=[];for(var j=0;j<c;j++)h.push(f.create_random_vector(3));d.push(h)}e.data.push(d)}return e}),_defineProperty(this,"create_gradient_grid2D",function(a,b){for(var c,d={rows:a,cols:b,data:[]},e=0;e<a;e++){c=[];for(var g=0;g<b;g++)c.push(f.create_random_vector(2));d.data.push(c)}return d}),_defineProperty(this,"create_random_vector",function(a){for(var b,c=[],d=0;d<a;d++)b=1,.5<=Math.random()&&(b=-1),c.push(b);return c}),this.magnitude=d,this.frequency=c,this.dimension=b,1==b||2==b?this.grid=this.create_gradient_grid2D(20,20):3==b&&(this.grid=this.create_gradient_grid3D(20,20,20))};