"use strict";function _classCallCheck(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperty(d,a,b){return a in d?Object.defineProperty(d,a,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[a]=b,d}var Perlin=function g(a,b,c){var z=Math.floor,e=this;_classCallCheck(this,g),_defineProperty(this,"get_value",function(d,f,g){return(d*=.9*e.frequency,f*=.9*e.frequency,g*=.9*e.frequency,1==e.dimension)?e.perlin2D(d,0)*e.magnitude:2==e.dimension?e.perlin2D(d,f)*e.magnitude:3==e.dimension?e.perlin3D(d,f,g)*e.magnitude:void 0}),_defineProperty(this,"mod",function(c,a){return(c%a+a)%a}),_defineProperty(this,"lerp",function(d,c,a){return a*d+(1-a)*c}),_defineProperty(this,"fade",function(c){var a=Math.pow;return 6*a(c,5)-15*a(c,4)+10*a(c,3)}),_defineProperty(this,"smerp",function(d,c,a){return e.lerp(d,c,e.fade(a))}),_defineProperty(this,"dot_product",function(e,c){if(e.constructor!==Array)throw"First argument is not an array.";else if(c.constructor!==Array)throw"Second argument is not an array.";else if(e.length!==c.length)throw"Arrays are not the same length.";for(var a=0,f=0;f<e.length;f++)a+=e[f]*c[f];return a}),_defineProperty(this,"create_random_vector",function(f,a){for(var b=[],c=0;c<f;c++)if(a){var g=1;.5<=Math.random()&&(g=-1),b.push(g)}else b.push(2*Math.random()-1);return b}),_defineProperty(this,"perlin2D",function(f,a){var b=z(f),c=z(a),d=f-b,g=a-c,h=e.dot_product([d,g],e.grid.data[e.mod(c,e.grid.rows)][e.mod(b,e.grid.cols)]),i=e.dot_product([d,g-1],e.grid.data[e.mod(c+1,e.grid.rows)][e.mod(b,e.grid.cols)]),j=e.dot_product([d-1,g],e.grid.data[e.mod(c,e.grid.rows)][e.mod(b+1,e.grid.cols)]),k=e.dot_product([d-1,g-1],e.grid.data[e.mod(c+1,e.grid.rows)][e.mod(b+1,e.grid.cols)]),l=e.smerp(i,h,g),m=e.smerp(k,j,g);return e.smerp(m,l,d)}),_defineProperty(this,"perlin3D",function(f,a,b){var c=z(f),d=z(a),g=z(b),h=f-c,i=a-d,j=b-g,k=e.dot_product([h,i,j],e.grid.data[e.mod(d,e.grid.rows)][e.mod(c,e.grid.cols)][e.mod(g,e.grid.layers)]),l=e.dot_product([h,i,j-1],e.grid.data[e.mod(d,e.grid.rows)][e.mod(c,e.grid.cols)][e.mod(g+1,e.grid.layers)]),m=e.dot_product([h,i-1,j],e.grid.data[e.mod(d+1,e.grid.rows)][e.mod(c,e.grid.cols)][e.mod(g,e.grid.layers)]),n=e.dot_product([h,i-1,j-1],e.grid.data[e.mod(d+1,e.grid.rows)][e.mod(c,e.grid.cols)][e.mod(g+1,e.grid.layers)]),o=e.dot_product([h-1,i,j],e.grid.data[e.mod(d,e.grid.rows)][e.mod(c+1,e.grid.cols)][e.mod(g,e.grid.layers)]),p=e.dot_product([h-1,i,j-1],e.grid.data[e.mod(d,e.grid.rows)][e.mod(c+1,e.grid.cols)][e.mod(g+1,e.grid.layers)]),q=e.dot_product([h-1,i-1,j],e.grid.data[e.mod(d+1,e.grid.rows)][e.mod(c+1,e.grid.cols)][e.mod(g,e.grid.layers)]),r=e.dot_product([h-1,i-1,j-1],e.grid.data[e.mod(d+1,e.grid.rows)][e.mod(c+1,e.grid.cols)][e.mod(g+1,e.grid.layers)]),s=e.smerp(m,k,i),t=e.smerp(q,o,i),u=e.smerp(n,l,i),v=e.smerp(r,p,i),w=e.smerp(t,s,h),x=e.smerp(v,u,h);return e.smerp(x,w,j)}),_defineProperty(this,"create_gradient_grid3D",function(f,a,b){for(var c,i={rows:f,cols:a,layers:b,data:[]},l=0;l<f;l++){c=[];for(var m,n=0;n<a;n++){m=[];for(var o=0;o<b;o++)m.push(e.create_random_vector(3));c.push(m)}i.data.push(c)}return i}),_defineProperty(this,"create_gradient_grid2D",function(f,a){for(var b,h={rows:f,cols:a,data:[]},d=0;d<f;d++){b=[];for(var i=0;i<a;i++)b.push(e.create_random_vector(2));h.data.push(b)}return h}),_defineProperty(this,"create_random_vector",function(e){for(var a,f=[],c=0;c<e;c++)a=1,.5<=Math.random()&&(a=-1),f.push(a);return f}),this.magnitude=c,this.frequency=b,this.dimension=a,1==a||2==a?this.grid=this.create_gradient_grid2D(20,20):3==a&&(this.grid=this.create_gradient_grid3D(20,20,20))};