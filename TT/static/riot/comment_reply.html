<comment-reply>
    <div class="ui row">
        <div class="ui grid comment-heading">
            <div class="two wide column">
                <a class="ui tiny circular image" href="/profiles/{ opts.cmt.author.id }/">
                    <img src="{ opts.cmt.author.portrait }">
                </a>
            </div>
            <div class="eight wide column">
                <div class="ui header header-text-container">
                    <div class="content header-text">
                        <a href="/profiles/{ opts.cmt.author.id }/">
                            { opts.cmt.author.reference }
                        </a>
                        <div class="sub header comment-date">
                            { opts.cmt.date_created }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="ui divider"></div>
    <div class="row content">
        <div class="ui content comment-text">
            { opts.cmt.text }
        </div>
    </div>
    <script>
 //       self = this

//        self.on('mount', function () {
//            print('my opts', my_opts)
//            if (!my_opts.cmt.parent) {
//                self.update_comment(opts)
//            }
//
//            let id = '#reply-text-area-' + opts.cmt.pk
//            let reply_form = $(id)
//
//            reply_form.keydown(function (e) {
//                if ((e.keyCode == 10 || e.keyCode == 13) && e.ctrlKey) {
//                    $(this).val(function (i, val) {
//                        let pos = e.target.selectionStart
//                        let spliced_string = val.slice(0, pos) + '\n' + val.slice(pos)
//                        return spliced_string
//                    })
//                } else if (e.keyCode === 13 && !e.ctrlKey) {
//                    e.preventDefault()
//                    print('submit')
//                    let text = $(this).val()
//                    print('author', opts.cmt.author.id)
//                    print('article', opts.cmt.article)
//                    print('comment', opts.cmt.pk)
//                    self.post_comment(text, opts.cmt.author.id, opts.cmt.article, opts.cmt.pk, opts.csrf)
//                    //self.update_comment(opts)
//                    // unfocus
//                }
//            })
//        })


//        self.post_comment = function (text, author_pk, article_pk, parent_pk, csrf_token) {
//            let post_data = {
//                "text": text,
//                "parent": parent_pk,
//                "author": author_pk,
//                "article": article_pk,
//            }
//
//            $.ajax({
//                type: 'POST',
//                url: '/api/v1/comments/',
//                data: JSON.stringify(post_data),
//                contentType: 'application/json',
//                dataType: 'json',
//                headers: {
//                    'X-CSRFToken': csrf_token,
//                },
//            })
//            .done(function (data) {
////                self.update_comment(parent_pk)
//                print(data)
//                window.dispatchEvent(new CustomEvent('update_comments', {bubbles: true,}))
//            })
//            .fail(function (data) {
//                print('comment post error:', data)
//            })
//        }
//
//        self.update_comment = function (opts) {
////            print('update comment', opts)
//            $.ajax({
//                type: 'GET',
//                url: '/api/v1/comments/' + opts.cmt.pk,
//                data: null,
//                contentType: 'application/json',
//                dataType: 'json',
//            }).done(function (data) {
////                print(opts)
////                print('reply data', opts.cmt.pk, data)
//                opts.replies = data.replies
//                self.update()
//            })
//        }

    </script>
    <style>
        comment {
            min-height: 60px;
            width: 80%;
            margin: 30px !important;
            padding: 20px 45px 20px 45px !important;
            background: white;
            border-radius: 5px;
        }

        .reply {
            margin: 15px !important;
            background: #eeeeee;
            border-radius: 4px !important;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
        }


        .comment-heading {
            width: 100% !important;
            min-height: 80px;
        }

        .reply .comment-heading {
            min-height: 65px;
        }

        .header-text {
            height: 70px;
        }

        .reply .header-text {
            height: 50px;
        }

        .header-text {
            display: flex !important;
            flex-direction: column;
            justify-content: space-between;
            text-align: start;
        }

        .comment-date {
            font-size: 1.0em !important;
            color: #aaaaaa;
        }

        .comment-text {
            font-size: 1.3em;
        }

        .row.content {
            display: flex;
            justify-content: start !important;
        }

        .replyform {
            width: 100%;
            margin: 15px;
        }
    </style>

</comment-reply>